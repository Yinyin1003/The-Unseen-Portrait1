# The Unseen Portrait - 项目使用说明

## 🎭 项目概述

这是一个完整的后脑勺自动拍照系统，能够：
- 检测后脑勺（不拍正脸）
- 自动拍照并保存
- 自动发送邮件（使用您指定的邮件内容）
- 声音提示和防重复拍照

## 📁 项目结构

```
backphoto/
├── 核心程序
│   ├── complete_english_workflow.py  # 🌟 主要程序（推荐使用）
│   ├── simple_head_test_en.py        # 英文头部检测测试
│   ├── test_email_en.py             # 英文邮件测试
│   └── back_detector.py              # 核心检测模块
│
├── 配置文件
│   ├── config.py                     # 主配置文件
│   └── config_example.py             # 配置示例
│
├── 邮件模块
│   ├── email_sender.py               # 邮件发送模块
│   └── email_input.py                # 邮箱输入模块
│
├── 文档
│   ├── README.md                     # 中文说明
│   ├── README_EN.md                  # 英文说明
│   ├── Email_Configuration_EN.md     # 英文邮件配置指南
│   └── 后脑勺检测使用说明.md          # 详细使用说明
│
└── 照片存储
    └── photos/                       # 自动创建的照片文件夹
```

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 配置邮件
编辑 `config.py` 文件，设置您的邮件配置：
```python
EMAIL_CONFIG = {
    'smtp_server': 'smtp.gmail.com',
    'smtp_port': 587,
    'sender_email': 'your_email@gmail.com',
    'sender_password': 'your_app_password',  # 使用应用密码
    'subject': 'The Unseen Portrait'
}
```

### 3. 运行主程序
```bash
# 完整工作流程（推荐）
python3 complete_english_workflow.py

# 或者只测试头部检测
python3 simple_head_test_en.py

# 测试邮件发送
python3 test_email_en.py
```

## 📧 邮件内容

系统发送的邮件内容：

**主题**: The Unseen Portrait

**内容**:
```
Hi,
The first glimpse
of your unseen self.
Sometimes the gentlest truths
are found
in the places we never look.
Here's to a day that feels new,
as if the world
has just begun again. 🌿
Captured on [timestamp]
Yinyin Zhou
```

## 🎯 主要功能

### 1. 后脑勺检测
- ✅ 只检测后脑勺，不拍正脸
- ✅ 使用多种检测算法（正面人脸排除、轮廓分析等）
- ✅ 防重复拍照（一个后脑勺只拍一张）

### 2. 自动拍照
- ✅ 检测到后脑勺时自动拍照
- ✅ 声音提示
- ✅ 照片自动保存到 `photos/` 文件夹

### 3. 自动邮件发送
- ✅ 拍照后自动发送邮件
- ✅ 使用您指定的邮件内容
- ✅ 支持 Gmail 和 QQ 邮箱

## 🔧 配置说明

### Gmail 配置
1. 开启两步验证
2. 生成应用密码（不是登录密码）
3. 在 `config.py` 中使用应用密码

### QQ 邮箱配置
1. 开启 SMTP 服务
2. 生成授权码
3. 在 `config.py` 中使用授权码

## 🎮 操作说明

### 运行程序
1. 运行 `python3 complete_english_workflow.py`
2. 将头部放在摄像头前
3. 系统自动检测后脑勺
4. 检测到后自动拍照并发送邮件
5. 按 ESC 或 Q 退出

### 控制键
- **ESC** 或 **Q**: 退出程序
- 程序会自动检测和拍照，无需手动操作

## 📸 照片管理

- 照片自动保存到 `photos/` 文件夹
- 文件名格式：`photo_YYYYMMDD_HHMMSS_XXX.jpg`
- 建议定期清理旧照片

## 🛠️ 故障排除

### 常见问题
1. **摄像头无法打开**
   - 检查摄像头权限
   - 确保摄像头未被其他程序占用

2. **邮件发送失败**
   - 检查网络连接
   - 验证邮件配置（使用应用密码）
   - 检查防火墙设置

3. **检测不准确**
   - 确保光线充足
   - 调整头部位置
   - 避免正面朝向摄像头

## 📋 备份说明

项目已自动备份到：
- `../backphoto_backup_20250926_104133/` - 文件夹备份
- `../backphoto_complete_backup_20250926_104136.tar.gz` - 压缩包备份

## 🎉 项目完成状态

✅ 所有功能已实现并测试通过
✅ 邮件内容已按您的要求配置
✅ 系统可以正常运行
✅ 项目已完整备份

现在您可以随时使用这个系统了！
