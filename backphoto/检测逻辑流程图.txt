后脑勺检测逻辑流程图
================================

开始检测
    ↓
获取摄像头画面
    ↓
转换为灰度图
    ↓
┌─────────────────────────────────┐
│        正脸检测                 │
│  (Haar级联分类器)               │
└─────────────────────────────────┘
    ↓
检测到正脸？
    ↓ 是                    ↓ 否
显示红色警告              继续检测
不拍照                    ↓
    ↓                    ┌─────────────────────────────────┐
    ↓                    │        头部区域检测             │
    ↓                    │  (侧面轮廓检测)                 │
    ↓                    └─────────────────────────────────┘
    ↓                            ↓
    ↓                    检测到头部形状？
    ↓                            ↓ 是                    ↓ 否
    ↓                    创建头部掩码              使用背景减除
    ↓                            ↓                    ↓
    ↓                    ┌─────────────────────────────────┐
    ↓                    │        多重检测结合             │
    ↓                    │  1. 头部区域掩码                │
    ↓                    │  2. 背景减除                    │
    ↓                    │  3. 边缘检测                    │
    ↓                    └─────────────────────────────────┘
    ↓                            ↓
    ↓                    查找轮廓
    ↓                            ↓
    ↓                    分析轮廓面积
    ↓                            ↓
    ↓                    面积 > 3000？
    ↓                            ↓ 是                    ↓ 否
    ↓                    选择最大轮廓              继续等待
    ↓                            ↓
    ↓                    ┌─────────────────────────────────┐
    ↓                    │        位置验证                 │
    ↓                    │  检查是否在检测区域内           │
    ↓                    └─────────────────────────────────┘
    ↓                            ↓
    ↓                    在检测区域内？
    ↓                            ↓ 是                    ↓ 否
    ↓                    显示检测框              继续等待
    ↓                    播放声音提示
    ↓                    自动拍照
    ↓                    保存照片
    ↓                            ↓
    ↓                    ┌─────────────────────────────────┐
    ↓                    │        等待下次检测             │
    ↓                    │  (2秒延迟)                      │
    ↓                    └─────────────────────────────────┘
    ↓                            ↓
    └────────────────────────────┘
                    ↓
                继续循环
                    ↓
              按ESC键退出？

关键检测点说明：
================

1. 正脸检测
   - 使用OpenCV的Haar级联分类器
   - 检测眼睛、鼻子、嘴巴等五官特征
   - 如果检测到正脸，立即停止拍照

2. 冷却期机制
   - 检测到正脸后，设置3秒冷却期
   - 防止在转头过程中误拍
   - 确保只有稳定的后脑勺才会被拍摄

3. 头部区域检测
   - 使用侧面人脸检测器
   - 检测头部的侧面轮廓
   - 创建头部区域的掩码

4. 多重检测方法
   - 背景减除：检测运动物体
   - 边缘检测：识别轮廓特征
   - 轮廓分析：分析形状和面积

5. 位置验证
   - 只检测指定区域内的物体
   - 避免检测到背景中的其他物体
   - 提高检测准确性

6. 面积过滤
   - 过滤掉面积小于3000像素的物体
   - 避免检测到噪声和小物体
   - 选择最大的轮廓作为可能的头部

检测策略总结：
==============

排除法 + 形状识别 + 位置验证

1. 排除正脸（主要策略）
2. 识别头部形状（辅助策略）
3. 验证位置和面积（过滤策略）
4. 多重检测方法结合（提高准确性）

这种方法的优势：
- 简单有效
- 实时性好
- 误检率低
- 用户友好
